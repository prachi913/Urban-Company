<html>
	<head>
	<style>
	.totalcomponents{
	width:75%;
		margin:auto;
		/* border:1px solid red; */
	}
	.topper{
		display:flex;
		justify-content: space-around;
	}
	.topper1{
		margin:60px 0px 0px 0px;
	}
	.topper1>span{
		border: 1px solid rgb(184, 184, 184);
		border-radius: 5px;
		color: rgb(15, 15, 15);
		font-family: os_semi_bold;
		font-size: 14px;
		font-weight: 600;
		line-height: 20px;
		text-align: center;
		padding:7px;
	}
	.topper1>h1{
		color: rgb(15, 15, 15);
		font-family: os_bold;
		font-size: 36px;
		font-weight: 700;
		line-height: 48px;
	}
	.linehr{
		align-self: center;
		background-color: rgb(167, 164, 164); 
		height: 5px;
		margin:10px 0px;
	}
	.smallerhr{
		width:65%;
		height: 3px;
	}
	.enderhr{
		width:85%;
		height: 1px;
	}
	.thin_linehr{
		align-self: center; 
		background-color: rgb(89, 59, 59); 
		height: 2px;
		margin-top:40px;
	}
	.bottom{
		display:flex;
		height:100vh;
		border:1px solid red;
	}
	.bottom>.data_section{
		width:55%;
	}
	.bottom>.m_vertical{
		width:2px;
		height:100%;
		border:1px solid red;
	}
	.bottom>.offer_section{
		width:44%;
	}
	.vertical_line{
		align-items: stretch;
		border: 0px solid black;
		box-sizing: border-box;
		display: flex;
		flex-basis: auto;
		flex-direction: column;
		flex-shrink: 0;
		margin: 0px;
		min-height: 100vh;
		min-width: 0px;
	}

	.data_element{
		display:flex;
		justify-content: space-between;
		padding:30px;
	}
	.li_green{
		border:1px solid green;
		margin:10px 30px;
		height:40px;
		width:40px;
		padding:8px 0px 0px 4px;
	}
	.offer_flx{
		display:flex;
	}
	</style>
	</head>
	<body>

<div class="totalcomponents">
	<div class="topper">
		<div class="topper1">
			<span>UC Safe</span>
			<h1></h1>
		</div>
		<div class="topper2">
			
		</div>
	</div>
	<div>
		<div class="linehr"></div>
		<div></div>
		<div class="thin_linehr"></div>
	</div>
	<div class="bottom">
		<div class="data_section">
			<div class="data_DOM">
			</div>
		</div>
		<div class="m_vertical">
			<div class="thin_linehr vertical_line"></div>
		</div>
		<div class="offer_section">
			<div>
				<div class="offer_flx">
					<div class="li_green">
						<svg viewBox="0 0 30 30" >
							<path d="M15 7.929L8.472 1.4a.997.997 0 00-.904-.274l-5.04 1.008a.5.5 0 00-.393.393l-1.008 5.04a.998.998 0 00.274.904L7.928 15a.999.999 0 001.414 0L15 9.343a.999.999 0 000-1.414zM5.25 6a.75.75 0 110-1.5.75.75 0 010 1.5z" fill="#24A346"></path>
						</svg>
					</div>
					<p>Assured cashback on Paytm</p>
				</div>
				<div class="offer_flx">
					<div class="li_green">
						<svg viewBox="0 0 30 30" >
							<path d="M15 7.929L8.472 1.4a.997.997 0 00-.904-.274l-5.04 1.008a.5.5 0 00-.393.393l-1.008 5.04a.998.998 0 00.274.904L7.928 15a.999.999 0 001.414 0L15 9.343a.999.999 0 000-1.414zM5.25 6a.75.75 0 110-1.5.75.75 0 010 1.5z" fill="#24A346"></path>
						</svg>
					</div>
					<p>Mobikwik | ZIP (Pay Later)</p>
				</div>
				<div class="offer_flx">
					<div class="li_green">
						<svg viewBox="0 0 30 30" >
							<path d="M15 7.929L8.472 1.4a.997.997 0 00-.904-.274l-5.04 1.008a.5.5 0 00-.393.393l-1.008 5.04a.998.998 0 00.274.904L7.928 15a.999.999 0 001.414 0L15 9.343a.999.999 0 000-1.414zM5.25 6a.75.75 0 110-1.5.75.75 0 010 1.5z" fill="#24A346"></path>
						</svg>
					</div>
					<p>5% Simpl cashback up to â‚¹750</p>
					
				</div>
				<div class="offer_flx">
					<div class="li_green">
						<svg viewBox="0 0 30 30" >
							<path d="M15 7.929L8.472 1.4a.997.997 0 00-.904-.274l-5.04 1.008a.5.5 0 00-.393.393l-1.008 5.04a.998.998 0 00.274.904L7.928 15a.999.999 0 001.414 0L15 9.343a.999.999 0 000-1.414zM5.25 6a.75.75 0 110-1.5.75.75 0 010 1.5z" fill="#24A346"></path>
						</svg>
					</div>
					<p>15% off on Kotak cards</p>
				</div>	
			</div>
			<div class="final_toal">
				<span></span><button>View Cart</button>
			</div>
		</div>
	</div>
</div>

		
</body>
</html>
<script>
	// window.addEventListener("load",()=>{

	// })
	
	let search_name="Sofa_Cleaning";
	async function lok(){
		let res=await fetch(`http://localhost:3000/${search_name}`);
		let dat=await res.json();
		document.querySelector(".topper1>h1").innerText=search_name;
		if(`./video/${search_name}.webm`){
				console.log("there")
		}
		document.querySelector(".topper2").innerHTML=`
		<video autoplay width="600px" loop muted autoplay="autoplay">
				<source src="./video/${search_name||null}.webm" type="video/webm">
			</video>
		`
		render_data(dat);
	}
	lok();

	async function render_data(new_data){
		document.querySelector(".data_DOM").innerHTML="";
		let ss=new_data.map((item)=>{
			return `
			<div class="single_element">
					<div class="data_element">
						<div>
							<h2>${item.Title}</h2>
							<span>${item.rating} ${item.reviews||""}</span>
							<p>${item.price}</p>
							<div class="linehr smallerhr"></div>
							<ul>
								${(item.desc1)?`<li>${item.desc1}</li>`:null}
								${(item.desc2)?`<li>${item.desc2}</li>`:null}
							</ul>
							<span>View Details</span>
						</div>
						<div>
							<div><img src="${item.Image}" alt=""></div>
							<button data-id="${item.id}" class="addtocart">Add</button>
						</div>
					</div>
					<div class="linehr enderhr"></div>
				</div>
			`;
		});
		document.querySelector(".data_DOM").innerHTML=ss.join(" ");
		let buttons=document.querySelectorAll(".addtocart");
		let x=JSON.parse(localStorage.getItem("cart_products"))||{};
		for(let i of buttons){
			i.addEventListener("click",async ()=>{
					(!x[search_name]) ? x[search_name]=[i.dataset.id]:x[search_name].push(i.dataset.id);
				localStorage.setItem("cart_products",JSON.stringify(x));
				let o=await lokesh(x);
		document.querySelector(".final_toal>span").innerHTML=`<strong>${o}</strong>`;
			})
		}
		let o=await lokesh(x);
		document.querySelector(".final_toal>span").innerHTML=`<strong>${o||""}</strong>`;
		console.log(o);
	}
	
	async function lokesh(x){
		let totalvalue=0;
		if(x[search_name]){
			console.log("i am present");
			return fr=x[search_name].reduce(async (acc,item) => {
					let dat=(await abc(item));
					totalvalue+=(Number(dat.price.substring(1,dat.price.length-1)));
					acc=totalvalue;
					return acc;
			},0);
			console.log(fr);
			async function abc(u){
				let res=await fetch(`http://localhost:3000/${search_name}/${u}`);
				return dat=await res.json();
			}
		}
		else{
			console.log("i am absent");
		}
		
		
	}
</script>
